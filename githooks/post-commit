#!/bin/sh
# Git hook to generate a header file with commit hash and commit time.
echo //generated by post-commit hook command in .git\hooks   > Core/Inc/git-commit-version.h
echo //"#define GIT_COMMIT_HASH \"" >> Core/Inc/git-commit-version.h
echo //git describe --always --dirty >> Core/Inc/git-commit-version.h
echo //truncate -s -1 >> Core/Inc/git-commit-version.h
echo //echo -n \" >> Core/Inc/git-commit-version.h
echo //"\n#define GIT_COMMIT_TIME \"" >> Core/Inc/git-commit-version.h
echo //git show --no-patch --no-notes --pretty='%cd' >> Core/Inc/git-commit-version.h
echo //truncate -s -1 >> Core/Inc/git-commit-version.h
echo //echo -n \" >> Core/Inc/git-commit-version.h
echo //echo -n \" >> Core/Inc/git-commit-version.h
echo //echo -e "\n" >> Core/Inc/git-commit-version.h
echo //echo -n "#define GIT_COMMIT_TIME \"" >> Core/Inc/git-commit-version.h
echo //git show --no-patch --no-notes --pretty='%cI' >> Core/Inc/git-commit-version.h
echo //truncate -s -1 Core/Inc/git-commit-version.h
echo //echo -n \" >> Core/Inc/git-commit-version.h


echo -n "#define GIT_COMMIT_HASH \"" >> Core/Inc/git-commit-version.h
git describe --always --dirty >> Core/Inc/git-commit-version.h
truncate -s -1 Core/Inc/git-commit-version.h
echo -n \" >> Core/Inc/git-commit-version.h
echo -e "\n" >> Core/Inc/git-commit-version.h
echo -n "#define GIT_COMMIT_TIME \"" >> Core/Inc/git-commit-version.h
git show --no-patch --no-notes --pretty='%cI' >> Core/Inc/git-commit-version.h
truncate -s -1 Core/Inc/git-commit-version.h
echo -n \" >> Core/Inc/git-commit-version.h


