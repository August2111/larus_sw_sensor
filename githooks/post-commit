#!/bin/sh
# Git hook to generate a header file with commit hash and commit time.
echo //generated by post- hook command in .git\hooks   > Core/Inc/git-commit-version.h

echo -n "#define GIT_COMMIT_HASH \"" >> Core/Inc/git-commit-version.h
git log -1 --format='%h' >> Core/Inc/git-commit-version.h
truncate -s -1 Core/Inc/git-commit-version.h
echo -n \" >> Core/Inc/git-commit-version.h
echo -e "\n" >> Core/Inc/git-commit-version.h
echo -n "#define GIT_COMMIT_TIME \"" >> Core/Inc/git-commit-version.h
git show --no-patch --no-notes --pretty='%cI' >> Core/Inc/git-commit-version.h
truncate -s -1 Core/Inc/git-commit-version.h
echo -n \" >> Core/Inc/git-commit-version.h
echo -e "\n" >> Core/Inc/git-commit-version.h
echo -n "#define GIT_TAG_INFO \"" >> Core/Inc/git-commit-version.h
git describe --tags >> Core/Inc/git-commit-version.h
truncate -s -1 Core/Inc/git-commit-version.h
echo -n \" >> Core/Inc/git-commit-version.h
echo -e "\n" >> Core/Inc/git-commit-version.h


